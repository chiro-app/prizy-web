<configuration debug="true">

  <include resource="org/springframework/boot/logging/logback/defaults.xml"/>
  <include resource="org/springframework/boot/logging/logback/console-appender.xml"/>

  <root level="info">
    <appender-ref ref="CONSOLE"/>
  </root>

  <springProfile name="loggly">
    <appender name="loggly" class="ch.qos.logback.ext.loggly.LogglyBatchAppender">
      <endpointUrl>https://logs-01.loggly.com/bulk/${LOGGLY_API_KEY}/tag/logback</endpointUrl>
      <pattern>%d{"ISO8601", UTC} %p %t %c %M - %m%n</pattern>
    </appender>
    <root level="INFO">
      <appender-ref ref="loggly"/>
    </root>
  </springProfile>

</configuration>